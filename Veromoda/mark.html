<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>商品详情</title>
    <link rel="stylesheet" href="./icon/iconfont.css">
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/headandfoot.css">
    <link rel="stylesheet" href="./css/mark.css">
</head>
<body>
    <header></header>

    <div id="fdj">
        <div class="fdj_l">
            <div class="fdjpic"><img src="./img/fdj1.jpg" alt=""></div>
            <div class="fdjpic"><img src="./img/fdj2.jpg" alt=""></div>
            <div class="fdjpic"><img src="./img/fdj3.jpg" alt=""></div>
            <div class="fdjpic"><img src="./img/fdj4.jpg" alt=""></div>
        </div>
        <div class="fdj_c" id="smallBox">
            <li class="fdj-img" ></li>
            <li class="fdj-img" ></li>
            <li class="fdj-img" ></li>
            <li class="fdj-img" ></li>
            <div id="maskBox"></div>
        </div>
        <div id="bigBox"></div>

        <div class="fdj_r">
            <h2>漫画贴布装饰牛仔裤女</h2>
            <h3>产品编号:320349004J38</h3>
            <dl>
                <dt>价格 <em style="color: #d91e25;font-size: 20px;">￥499</em></dt>
                <dd>本店活动 满一件包邮</dd>
            </dl>
            
            <div class="count">
                <p>数量</p>
                <div class="number">
                        <span class="num">1</span>
                        <div class="but">
                            <button type="button" class="add">+</button>
                            <button type="button" class="cut">-</button>
                        </div>
                </div>
            </div>

            <div class="GWC">
                <a href="#" class="gwc1">加入购物车</a>
                <a href="cart.html">立即购买</a>
            </div>
        </div>

    </div>
    <div id = "tck">
        <p>成功添加至购物车！</p>
        <div class="jiesuan">
            <a href="#" class="gwca">去购物车结算</a>
            <a href="#" class="gwcb">继续购物</a>
        </div>
    </div>

    <footer></footer>
</body>
</html>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
<script src="./mark.js"></script>
<script>

    $("header").load("header.html .bigBOX",function(){
        $(".bigBOX").html();
        $(".navigation li").hover(function(){
            $(this).find("ul a").css({display:"block"})
            $(this).find("ul").stop().slideDown(100)
        },function(){
            $(this).find("ul a").css({display:"block"})
            $(this).find("ul").stop().slideUp(1)
        })
    })

    $("footer").load("footer.html .foot_top",function(){
        $(".foot_top").html();
    })

    /* 放大镜 */
    /* 初始让其显示第一张图片及放大镜 */
    $(".fdj-img").eq(0).css({backgroundImage:"url(./img/fdj1.jpg)"});
    $("#bigBox").css({backgroundImage:"url(./img/fdj1.jpg)"});

    for(let i=0;i<$(".fdjpic").length;i++){
        $(".fdjpic").eq(i).click(function(){
            $(this).css({"border": "2px solid red"}).
            siblings($(this)).css({"border": "0px"});

            $(".fdj-img").css({backgroundImage:"url(./img/fdj"+(i+1)+".jpg)"});
            $("#bigBox").css({backgroundImage:"url(./img/fdj"+(i+1)+".jpg)"});
        })
    }


    let oSmallBox = document.getElementById("smallBox");
	let oBigBox = document.getElementById("bigBox");
	let oMask = document.getElementById("maskBox");

	let mf = new Magnifier(oSmallBox, oBigBox, oMask);
    mf.eventBind();
    

    /* 弹出框 */
    $.fn.extend({

    Popplugin:function(){
       let box = $(this)[0];   //将jQuery对象变成原生对象，相当于get(0)
       let divbtn = null;

//设置div块的位置(点击让其在正中间显示)
    function setBoxPostion(){
        box.style.display = "block"; 
        box.style.left = window.innerWidth/2 - box.offsetWidth/2 + "px";
        box.style.top = window.innerHeight/2 - box.offsetHeight/2 + "px";
        
        createBtn();  
    }

//创建点击按钮
    function createBtn(){

        divbtn = document.createElement("button");
        
        divbtn.style.position = "absolute";    //按钮一定要先加定位
        divbtn.style.width = 50 + "px";
        divbtn.style.height = 25 + "px"; 
        divbtn.innerHTML = "关闭";

        box.appendChild(divbtn);

        divbtn.style.left = box.offsetWidth - divbtn.offsetWidth -4 + "px";
        divbtn.style.top = 0;
        closeBox();    //调用
    }

//点击关闭按钮让box隐藏
    function closeBox(){
        divbtn.onclick = function(){
            box.style.display = "none";
        }
    }

    setBoxPostion();   //调用该方法

}

});

    $(".gwc1").click(function(){
        $("#tck").Popplugin();
        
    });
    

</script>